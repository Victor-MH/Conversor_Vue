<html>
    <head>
        <title>Conversor de unidades</title>
    </head>
    <style>
        body {
            background-color: #666;
        }
        h1 {
            font-family: Helvetica;
        }

        h2 {
            font-family: Helvetica;
            text-decoration: underline;
            padding: 10px ;
            background-color: aquamarine;
            width: 22%;
            height: 4%;
        }
        h3 {
            font-family: Helvetica;
            
        }
        body {
            padding: 15px 20px;
        }
    
        p { padding: 0px 5px;
            font-size: x-large;
            font-weight: bold;
            font-family: Helvetica;
            letter-spacing: 1px;
            }
        
        input {
            width: 20%;
            padding: 5px 10px;
            font-size: large;
            font-weight: bold;
            font-family: Helvetica;
            border: 2px solid blue;
            border-radius: 5px;
            outline: none;    
        }
    
        input:focus {
            border: 2px solid purple;
            border-radius: 5px;
        }
    
    </style>
    <body>
        <div id="app">
            <h1>Convierte unidades en tiempo real!</h1>
            <h3>Incluyendo decimales!! <br> Bueno... aún no</h3>

            <h2>Sistema Decimal</h2>
            <input type="number" v-model="ingreso" min="0">
            <p>Decimal: {{ ingreso }}</p>
            <p>Binario: {{ deci_bin }}</p>
            <p>Octal: {{ deci_oct }}</p>
            <p>Hexadecimal: {{ deci_hex }}</p>

            <h2>Sistema Binario</h2>
            <input type="number" v-model="ingreso_bin" min="0">
            <p>Decimal: {{ bin_deci }}</p>
            <p>Binario: {{ bin }}</p>
            <p>Octal: {{ bin_oct }}</p>
            <p>Hexadecimal: {{ bin_hex }}</p>

        </div>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script>
            new Vue({
                el: '#app',

                data(){
                    return{
                     ingreso: 0,
                     ingreso_bin:0
                    }
                },

                computed: {
                    deci_bin(){ 
                        return this.decimal_a_x(2, this.ingreso);
                    },

                    deci_oct(){
                        return this.decimal_a_x(8, this.ingreso);
                    },

                    deci_hex(){
                        return this.decimal_a_x(16, this.ingreso);
                    },


                    bin(){//corregir
                        let resultado
                        let binario = Math.floor(Math.abs(this.ingreso_bin));
                        binario = binario.toString();
                        binario = binario.split("");
                        binario.reverse();

                        binario = binario.map( (value) => {
                            return parseInt(value)
                        } )

                        const validacion = binario.some( (value) => value > 1 );

                        if(validacion){
                            resultado = "NaN";
                        }else{
                            resultado = this.ingreso_bin;
                        }
                        return resultado;
                        
                        
                    },

                    bin_deci(){
                        return this.bin_x();
                    },

                    bin_oct(){
                        return this.decimal_a_x(8, this.bin_deci);
                    },

                    bin_hex(){
                        return this.decimal_a_x(16, this.bin_deci);
                    }

                },

                methods: {
                    decimal_a_x(div, source){//código para convertir de sistema decimal a otros
                        let divisor = div, dividendo = Math.floor(Math.abs(source)), residuo=[], resultado;
                
                        do{
                            resultado = dividendo % divisor;
                            dividendo = Math.floor(dividendo / divisor);
                            
                            if(div == 16){
                                if(resultado === 10) { resultado = 'A' }
                                if(resultado === 11) { resultado = 'B' }
                                if(resultado === 12) { resultado = 'C' }
                                if(resultado === 13) { resultado = 'D' }
                                if(resultado === 14) { resultado = 'E' }
                                if(resultado === 15) { resultado = 'F' }
                            }
                            
                            residuo.push(resultado);

                        }while(dividendo > 0)

                        residuo.reverse();
                        return residuo.join('');

                    },

                    bin_x(){//código para convertir de sistema binario a otros
                        let resultado
                        let binario = Math.floor(Math.abs(this.ingreso_bin));
                        binario = binario.toString();
                        binario = binario.split("");
                        binario.reverse();

                        binario = binario.map( (value) => {
                            return parseInt(value)
                        } )

                        const validacion = binario.some( (value) => value > 1 );

                        if(validacion){
                            resultado = "Ingresaste un número no binario, intenta de nuevo";
                        }else{
                            for(let i = 0; i < binario.length; i++){
                                binario[i] = Math.pow(2, i) * binario[i];
                            }

                            if(binario[0] != null){
                                resultado = binario.reduce( (total, value) => {
                                return total + value;
                                })
                            }
                        }
                        return resultado;
                    }
                }
            })
        </script>
    </body>
</html>